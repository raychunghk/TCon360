# @format

version: "3.8"
services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    image: tcon360_backend
    container_name: tcbackend
    ports:
      - "8255:3800" # Map host port 8255 to container port 3800
    environment:
      - NODE_ENV=development
      - JWT_SECRET=aBcDeFgHiJkLmNoPqRsTuVwXyZ0123456789
      - DATABASE_URL=file:/config/workspace/vm/js/TCon360/TCon360.db
      - BACKEND_PORT=3800
      - TOKEN_MAX_AGE=12000000 # Updated from 113000 to match your earlier request
    volumes:
      - ./:/config/workspace/vm/js/TCon360
      - ./TCon360.db:/config/workspace/vm/js/TCon360/TCon360.db
    command: ["pnpm", "--filter", "backend", "run", "start:dev"]
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
