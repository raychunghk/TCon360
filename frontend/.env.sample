# ==============================================================================
# BetterAuth Google OAuth Configuration
# ==============================================================================

# Google OAuth Credentials
# Get these from: https://console.cloud.google.com/apis/credentials
# 1. Create a new OAuth 2.0 client ID
# 2. Add authorized redirect URI: https://code2.raygor.cc/absproxy/3000/api/bauth/callback/google
# 3. Copy the Client ID and Client Secret here
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# Better Auth Base URL
# IMPORTANT: Read this carefully before setting this value!
#
# Option 1: Leave EMPTY (Recommended for reverse proxy)
#   - BetterAuth will auto-detect the external URL from X-Forwarded-* headers
#   - Works correctly with reverse proxies like nginx, Apache
#   - No need to hardcode URLs
#   - trustedProxyHeaders will be enabled automatically
#
# Option 2: Set to localhost (For local development WITHOUT proxy)
#   - Use this if running directly on http://localhost:3000
#   - No reverse proxy involved
#   - Example: http://localhost:3000
#
# Option 3: Set to proxy domain (NOT recommended)
#   - Only use if auto-detection fails and you know what you're doing
#   - May cause issues with some OAuth providers
#   - Example: https://code2.raygor.cc/absproxy/3000
#
# For this project with reverse proxy: Leave it EMPTY!
BETTER_AUTH_URL=

# Trusted Origins
# Comma-separated list of origins that are allowed for OAuth callbacks
# This provides additional security - even if headers are spoofed,
# origins not in this list will be rejected
TRUSTED_ORIGINS=http://localhost:3000,https://code2.raygor.cc

# Better Auth Debug Mode
# Set to true to enable detailed logging for debugging OAuth flow
# Useful for troubleshooting redirect_uri_mismatch and other OAuth errors
BETTER_AUTH_DEBUG=true

# ==============================================================================
# Core Application Configuration
# ==============================================================================

# JWT Secret
# Used to sign JWT tokens (must be at least 32 characters)
# Generate a secure random string for production
JWT_SECRET=aBcDeFgHiJkLmNoPqRsTuVwXyZ0123456789ABCDEF

# Token Max Age
# How long tokens are valid (in milliseconds)
# Default: 2592000000 = 30 days
TOKEN_MAX_AGE=2592000000

# Environment
# Options: development, production, test
NODE_ENV=development

# ==============================================================================
# Proxy Configuration
# ==============================================================================

# Use Reverse Proxy
# Set to true if your app is behind nginx, Apache, or another reverse proxy
USE_REVERSE_PROXY=false

# Proxy Path
# The path prefix used by the reverse proxy
# Example: /absproxy means the app is accessed at https://domain.com/absproxy/3000/
PROXY_PATH=/absproxy

# Frontend Port
# The port the Next.js frontend runs on locally
FRONTEND_PORT=3000

# Backend Port
# The port the NestJS backend runs on locally
BACKEND_PORT=3800

# Base Path Enabled
# Set to true to include proxy path in URLs (true for development with proxy)
# Set to false for production or when running without proxy
BASE_PATH_ENABLED=true

# ==============================================================================
# Legacy / Compatibility Configuration
# ==============================================================================

# NextAuth Secret
# Required for compatibility with Auth.js (NextAuth), even when using BetterAuth
# Can use the same value as JWT_SECRET
NEXTAUTH_SECRET=aBcDeFgHiJkLmNoPqRsTuVwXyZ0123456789ABCDEF

# Auth Provider Switch
# Set to true to use BetterAuth (new implementation)
# Set to false to use NextAuth/Auth.js (legacy implementation)
USE_BETTER_AUTH=true

# ==============================================================================
# Migration Notes
# ==============================================================================
#
# After this OAuth flow is working, you can move these values to /packages/config:
# 1. Add GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET to packages/config/src/env.ts
# 2. Update the Zod schema to validate these new environment variables
# 3. Import and use them from config instead of process.env directly
#
# For now, use .env.local for testing (copy this file to .env.local and fill in values)
# ==============================================================================
